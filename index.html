<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!--<link href="css/jquery-ui.css" rel="stylesheet">-->

    <script src="js/jquery.js"></script>
    <!--<script src="js/jquery-ui.js"></script>-->
    <script src="js/bootstrap.min.js"></script>
 
 <style>
    #oilTable
    {
    	font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
    	width:100%;
    	border-collapse:collapse;
    }
    #oilTable td, #customers th 
    {
    	font-size:1em;
    	border:1px solid #98bf21;
    	padding:3px 7px 2px 7px;
    }
    #oilTable th 
    {
    	font-size:1.1em;
    	text-align:left;
    	padding-top:5px;
    	padding-bottom:4px;
    	background-color: #419641;
    	color:#ffffff;
    }
    #oilTable tr.alt td 
    {
    	color:#000000;
    	background-color:#EAF2D3;
    }
</style>
</head>
<body>

<div class="container ">
    <div class="panel panel-head col-sm-6 col-md-12"  style="background-color: Tomato">
	<!--<h1>打皂新世界</h1>-->
	<br>
        <div class="divHead col-sm-6 col-md-3"  style="background-color: Tomato">
              <h1>打｢皂｣新生活</h1>
        </div>
        <div class="divHead col-sm-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="image\image2.jpg"  class="img-circle"
                     alt="通用的占位符缩略图">
            </a>
        </div>
        <div class="divHead col-sm-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="image\image3.jpg" class="img-circle"
                     alt="通用的占位符缩略图">
            </a>
        </div>
        <div class="divHead col-sm-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="image\image4.jpg" class="img-circle"
                     alt="通用的占位符缩略图">
            </a>
        </div>
    </div>
</div>

<div class="panel-group container " id="accordion"> 
    <!--Bootstrap 折叠（Collapse）插件-->
	<div class="panel panel-success">
		<div class="panel-heading">
			<h4 class="panel-title">
				<a data-toggle="collapse" data-parent="#accordion" 
				   href="#collapse1">
					配方設定
				</a>
			</h4>
		</div>
		<div id="collapse1" class="panel-collapse collapse">
			<div class="panel-body">
                <!--<form  id="setForm" class=" form-horizontal"  method="post" action="echo.php">-->
                <form  id="setForm" name="setForm" class=" form-horizontal">
                <div class="container">
                    <div class="row">
                        <div class="col-md-11">
                            <div class="panel panel-success">
                                                <p></p>
            
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="txtName">配方皂名稱</label>  
                                        <div class="col-md-4">
                                            <input id="txtName" name="txtName" type="text"  class="form-control input-md" required="">
                                    
                                        </div>
                                        <label class="col-md-2 control-label" for="txtWeight">總油重(g)</label>  
                                        <div class="col-md-2">
                                        <input id="txtWeight" name="txtWeight" type="text" class="form-control input-md" required="">
                                        </div>
                                   </div>
                                   <div class="form-group">
                                        <label class="col-md-2 control-label" for="selOil">油脂選擇</label>
                                        <div class="col-md-4">
                                        <select id="selOil" name="selOil" class="form-control" onChange="selOilChange(this.options[this.options.selectedIndex].value)">
                                            <option value="1">椰子油</option>
                                            <option value="2">棕梠油</option>
                                            <option value="3">橄欖油</option>
                                        </select>
                                        </div>
                                        <label class="col-md-2 control-label" for="txtRate">油佔比%</label>  
                                        <div class="col-md-2">
                                        <input id="txtRate" name="txtRate" type="text" 
                                        class="form-control input-md"
                                        pattern="\d{2}" //pattern 格式驗證
                                        required="">
                                        </div>
                                        <div class="col-md-1">
                                        	<div class="form-group">
                                        		<label class="btn btn-default glyphicon glyphicon-plus" for="inputfile" onclick="OilAdd()">加入</label>
                                        	</div>                                
                                        </div>
            
                                   </div>     
                                   <div class="form-group">
                                       <div class="row" hidden="true">
                                           <label id="labOil" class="col-md-2 control-label">aa</label>  
                                           <label id="labInsValue" class="col-md-2 control-label">bbb</label>  
                                           <label id="labSoapValue" class="col-md-2 control-label">ccc</label> 
            
                                        </div>   
                                       <div class="row">
                                            <table id="oilTable" class="table table-striped" wight="90%">
                                              <!--<caption>油品選擇清單</caption>-->
                                              <thead>
                                                <tr  class="alt">
                                                   <th width="5%"></th>
                                                   <th width="35%">油品名稱</th>
                                                   <th width="10%">INS值</th>
                                                   <th width="10%">皂化價</th>
                                                   <th width="10%">油重</th>
                                                   <th width="10%">佔比%</th>
                                                   <th width="20%">取消</th>
                                                </tr>
                                                
                                              </thead>
                                              <tbody> 
                                              </tbody>
                                            </table>  
            
                                        </div>   
            
                                   </div>     
            
                                <div class="panel-heading">
                                        <button type="submit" name="loginOrCancel" value="addMember"
                                          id="loginButton"
                                          class="btn btn-success" >
                                         <span class="glyphicon glyphicon-send"></span> 送出
                                        </button>
                                        <button type="submit" name="loginOrCancel" value="cancel"
                                           id="cancelButton"
                                           class="btn btn-success">
                                           <span class="glyphicon glyphicon-remove"></span> 取消
                                        </button>
                                         <label class="col-md-2 control-label">氫氧化鈉</label>  
                                         <label id="labNaOH" class="col-md-1 control-label"></label>  
                                         <label class="col-md-1 control-label">冰塊</label>  
                                         <label id="labWater" class="col-md-1 control-label"></label>  
                                         <label class="col-md-1 control-label">INS</label>  
                                         <label id="labInsTotal" class="col-md-1 control-label"></label>
                                         <label class="col-md-1 control-label">合計</label>  
                                         <label id="labRateTotal" class="col-md-1 control-label"></label>
            
                                    
                                </div>
            
            
                            </div>
            
                        </div>
            
            
                    </div>
                </div>
                </form>
			</div>
		</div>
	</div>	
	
	<div class="panel panel-info">
		<div class="panel-heading">
			<h4 class="panel-title">
				<a data-toggle="collapse" data-parent="#accordion" 
				   href="#collapse2">
					動手做
				</a>
			</h4>
		</div>
		<div id="collapse2" class="panel-collapse collapse">
			<div class="panel-body">
            <div id="myCarousel" class="carousel slide">
            	<!-- 轮播（Carousel）指标 -->
            	<ol class="carousel-indicators">
            		<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            		<li data-target="#myCarousel" data-slide-to="1"></li>
            		<li data-target="#myCarousel" data-slide-to="2"></li>
            	</ol>   
            	<!-- 轮播（Carousel）项目 -->
            	<div class="carousel-inner">
            		<div class="item active">
            			<img src="image\step01.png" alt="First slide">
            			<div class="carousel-caption">工具篇</div>
            		</div>
            		<div class="item">
            			<img src="image\step02.png" alt="Second slide">
            			<div class="carousel-caption">Step 1</div>
            		</div>
            		<div class="item">
            			<img src="image\step03.png" alt="Second slide">
            			<div class="carousel-caption">Step 2</div>
            		</div>
            		<div class="item">
            			<img src="image\step04.png" alt="Second slide">
            			<div class="carousel-caption">Step 3</div>
            		</div>
            		<div class="item">
            			<img src="image\step05.png" alt="Second slide">
            			<div class="carousel-caption">Step 4</div>
            		</div>
            		<div class="item">
            			<img src="image\step06.png" alt="Second slide">
            			<div class="carousel-caption">Step 5-1</div>
            		</div>
            		<div class="item">
            			<img src="image\step07.png" alt="Second slide">
            			<div class="carousel-caption">Step 5-2</div>
            		</div>
            		<div class="item">
            			<img src="image\step08.png" alt="Second slide">
            			<div class="carousel-caption">Step 5-3</div>
            		</div>
            		<div class="item">
            			<img src="image\step09.png" alt="Second slide">
            			<div class="carousel-caption">Step 6</div>
            		</div>
            	</div>
            	<!-- 轮播（Carousel）导航 -->
            	<a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
            	    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            	    <span class="sr-only">Previous</span>
            	</a>
            	<a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
            	    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            	    <span class="sr-only">Next</span>
            	</a>
            </div> 
			</div>
		</div>
	</div>	
	<div class="panel panel-warning">
		<div class="panel-heading">
			<h4 class="panel-title">
				<a data-toggle="collapse" data-parent="#accordion" 
				   href="#collapse3">
					下載配方表
				</a>
			</h4>
		</div>
		<div id="collapse3" class="panel-collapse collapse">
			<div class="panel-body">
			    <div class="row">
			        <div class="col-md-5">
			            <h4>
                        文字繪製位置<br>
                        </h4>
                    <div class="input-group">
                        <span class="input-group-addon">X</span>
                        <input id="txtX" type="text" class="form-control" value="5" placeholder="twitterhandle">
                        
                    </div>			            
                    <div class="input-group">
                        <span class="input-group-addon">Y</span>
                        <input id="txtY" type="text" class="form-control" value="5" placeholder="twitterhandle">
                    </div>			            
                    <H4>請點選來源圖片
                        <select id="selImage" name="selImage"  onChange="selImageChange(this.options)">
                            <option value="1">image1</option>
                            <option value="2">image2</option>
                        </select>
                    </H4>
                    
                    <img id="imgSelect"  width="240" height="200" style="border:1px solid #000000;" />
                    
                	<input type="button" id="Button1" name="Button1"   
                		value="轉出配方圖表" onclick="Button1_onclick()">
			        </div>
			        
			        <div class="col-md-7">
                        <canvas id="myCanvas" width="480" height="400"
                              style="border:1px solid #000000;"></canvas>
                        <div>
                            <a id="aDownload" href="#" download="image.png">Download</a>
                        </div>
			            
			        </div>
			        
			    </div>
			</div>
		</div>

        <div id="myAlert" class="alert alert-warning">
        	<a href="#" class="close" data-dismiss="alert" >&times;</a>
        	<strong>警告！</strong>您的网络连接有问题。
        </div>

	</div>	
</div>
<div id="debug">
</div>
<script>
  // $("#accordion").accordion();
  // $("#accordion").accordion({ active: 2 });
  // $("#accordion").accordion({ collapsible: true });  //多頁籤選單可全部收合
  // $("#accordion").accordion({ event: "mouseover" });

    var oilList =
        [
            { name: "椰子油" ,insValue: 258, soapValue: 0.19 , softOil: false  ,descript:"富含飽和脂肪酸，可做出洗淨力強、質地硬、顏色雪白且泡沫多的香皂。但洗淨力很強的皂難免會讓皮膚感覺乾澀，所以使用份量不宜過高，建議不要超過全油脂的20%～30%左右。" },
            { name: "可可脂" , insValue: 157, soapValue: 0.137 , softOil: false ,descript:"" },
            { name: "乳油木果脂" , insValue: 116, soapValue: 0.128 , softOil: false ,descript:"" },
            { name: "棕櫚油" , insValue: 145, soapValue: 0.141 , softOil: false ,descript:"" },
            { name: "橄欖油" , insValue: 109 , soapValue: 0.134 , softOil: false,descript:"" },
            { name: "芥花油" , insValue: 56, soapValue: 0.1324 , softOil: false ,descript:"" },
            { name: "葡萄籽油" , insValue: 66, soapValue: 0.1265 , softOil: true ,descript:"" },
            { name: "苦茶油" , insValue: 108, soapValue: 0.1362 , softOil: true ,descript:"" },
            { name: "甜杏仁油" , insValue: 97, soapValue: 0.136 , softOil: true ,descript:"" },
            { name: "荷荷巴油" , insValue: 11, soapValue: 0.069 , softOil: true ,descript:"" },
            { name: "蓖麻油" , insValue: 95, soapValue: 0.1286 , softOil: true ,descript:"" },
            { name: "小麥胚芽油" , insValue: 58, soapValue: 0.137 , softOil: true ,descript:"" },
            { name: "榛果油" , insValue: 94, soapValue: 0.1356 , softOil: true ,descript:"" },
            { name: "杏桃核仁油" , insValue: 91, soapValue: 0.135 , softOil: true ,descript:"" },
            { name: "米糠油" , insValue: 70, soapValue: 0.128 , softOil: true ,descript:"" },
            { name: "澳洲胡桃油" , insValue: 119, soapValue: 0.139 , softOil: true ,descript:"" },
            { name: "酪梨油" , insValue: 99, soapValue: 0.134 , softOil: true ,descript:"" },
        ];

$(document).ready(function() {
  //表單載入時執行
  $('#myAlert').hide();    //顯示.show();
  $(".divHead").hide();    //隱藏 class='divHead' 所有物件


  var obj = $('.divHead'); 
  for(i=0;i<=obj.length;i++)
  {
      $(obj[i]).fadeIn(i*1500); //讓隱藏的物件依序顯示 , 設定淡出時間
  }

      $("#selOil").empty();

    var html="";
    $.each(oilList, function (key, obj) {
       // debugger;
        var oilText = obj.name + " [INS:" + obj.insValue + " 皂化價:"+ obj.soapValue + "]";
        html += '<option value='+obj.name+' text='+oilText+'>'+oilText+'</option>';
    })
    $('#selOil').html(html);  
    $("#selOil").val(0);  //設定值為0的選項被選取

    loadImage();
        
});
$(function(){
	$(".close").click(function(){
		$("#myAlert").alert();
	});
});  
function selOilChange(s){
    //find object in list
    var result = $.map(oilList, function(item, index) {
      return item.name
    }).indexOf(s);    
    //  $('#labOil').html=oilList[result].name;   //無法改變labOil的值,改寫下面方式
     document.getElementById("labOil").innerHTML=oilList[result].name;   
     document.getElementById("labInsValue").innerHTML=oilList[result].insValue;   
     document.getElementById("labSoapValue").innerHTML=oilList[result].soapValue;   
	 //alert(s);
} 
function OilAdd(){
   var name=$("#labOil").text();
   var insValue=parseFloat($("#labInsValue").text());
   var soapValue=parseFloat($("#labSoapValue").text());
   var rateTotal=0;
   if( $("#labRateTotal").text()!="")
   {
       rateTotal += parseFloat($("#labRateTotal").text());
   }

   //讀取 Form 表單欄位值
   var oform = document.forms['setForm'];
   var progName = oform.elements.txtName.value;
   var oilTotal = parseFloat(oform.elements.txtWeight.value);
   var oilRate =parseFloat( oform.elements.txtRate.value);   
   var oilWeight =Math.round(oilTotal*oilRate/100,0);
   if (oilRate+rateTotal>100) {
       alert('百分比不可以超過100,請重新設定');
      return;
   }
    var table = document.getElementById("oilTable");
    var rowCount=document.getElementById("oilTable").rows.length;
    var row = table.insertRow(rowCount);
   // row.html=html;
    var cell1 = row.insertCell(0);
    var cell2 = row.insertCell(1); //油品名稱
    var cell3 = row.insertCell(2); //Ins值
    var cell4 = row.insertCell(3); //皂化價
    var cell5 = row.insertCell(4); //油重
    var cell6 = row.insertCell(5); //佔比
    var cell7 = row.insertCell(6); //取消
    cell1.innerHTML = "";
    cell2.innerHTML = name; 
    cell3.innerHTML = insValue; 
    cell4.innerHTML = soapValue; 
    cell5.innerHTML = oilWeight; 
    cell6.innerHTML = oilRate; 
    cell7.innerHTML = '<label class="btn btn-default glyphicon glyphicon-remove" onclick="oilDelete(this)">取消</label>';
    soapCompute();  //計算氫氧化鈉,水, INS

  //  alert(s);
}
function oilDelete(r){
    var i = r.parentNode.parentNode.rowIndex;
    document.getElementById("oilTable").deleteRow(i);
    soapCompute();
    
}
function getRate(){
    //取得已加入佔比
    
}
function soapCompute() {
// ●氫氧化鈉的計算
// 依油脂不同所需要的氫氧化鈉毫克數也不同，需視油脂的「皂化價」來決定氫氧化鈉的添加量，「皂化價」亦即皂化１公克油脂所需要之鹼質的毫克數。
// EX：例如：椰子油的皂化價是0.19，亦即1g的椰子油需0.19g的氫氧化鈉皂化，100g的椰子油需19g的氫氧化鈉皂化。
// 舉例：有椰子油100g、芥花油150g、棕櫚油250g，椰子油的皂化價是0.19、芥花油是0.124、棕櫚油是0.141，則需：
// (100×0.19)+(150×0.124)+(250×0.141)=19+18.6+35.25=72.85g的氫氧化鈉方能完全皂化。 

// ●INS值的計算是：(油脂重量÷油脂總重量)×油脂的INS值
// 舉例：有椰子油100g、芥花油150g、棕櫚油250g，椰子油的INS值是258、芥花油是56、棕櫚油是145，則INS值為：
// (100/500)×258+(150/500)×56+(250/500)×145=51.6+16.8+72.5=140.9→可(介於120～170間)
   //讀取 Form 表單欄位值
   var oform = document.forms['setForm'];
   var oilTotal = oform.elements.txtWeight.value;
    var table = document.getElementById("oilTable");
    var rowCount=document.getElementById("oilTable").rows.length;
    var NaOH=0;
    var Water=0;
    var oilWeight=0;
    var ins=0;
    var insTotal=0;
    var soapPrice=0
    var rate=0;
    var rateTotal=0;
    for(i=1;i<=rowCount-1;i++)
    {
        rate=parseFloat(table.rows[i].cells[5].innerHTML);
        oilWeight=parseFloat(table.rows[i].cells[4].innerHTML);
        ins=parseFloat(table.rows[i].cells[2].innerHTML);
        soapPrice=parseFloat(table.rows[i].cells[3].innerHTML);
        insTotal += (oilWeight/oilTotal)*ins;
        NaOH +=Math.round(soapPrice*oilWeight,4);
        rateTotal += rate;
        
        
    }
    document.getElementById("labNaOH").innerHTML=Math.round(NaOH,0);
    //  ●水量的計算
    // 　純水+冰塊的計算配方中氫氧化鈉的重量×2.3 
    // 　母奶(冰塊)的計算配方中氫氧化鈉的重量×2.6
    Water=Math.round(NaOH*2.3,0);
    document.getElementById("labWater").innerHTML=Water;
    document.getElementById("labInsTotal").innerHTML=Math.round(insTotal,0);
    document.getElementById("labRateTotal").innerHTML=rateTotal.toString();


}
$(function () { 
        $('#collapse3').on('show.bs.collapse', function () {
           // alert('功能尚未完成');
           // $('#myAlert').attr('aria-hidden',false);
        })
    });
        myCanvas.addEventListener("click", function (e) {
             //alert("x:"+event.x+ "y:"+event.y);
             document.getElementById("txtX").value=event.offsetX;
             document.getElementById("txtY").value=event.offsetY;
            //  document.getElementById("txtX").value=event.layerX;
            //  document.getElementById("txtY").value=event.layerY;
        }, true);
    
function loadImage(){
    var imgList =
        [
            { showName: "soapBg1", filePath: "image\\soapBg1.jpg" },
            { showName: "soapBg2", filePath: "image\\soapBg2.jpg" },
            { showName: "soapBg3", filePath: "image\\soapBg3.jpg" },
            { showName: "soapBg4", filePath: "image\\soapBg4.jpg" },
            { showName: "soapBg5", filePath: "image\\soapBg5.jpg" },
            { showName: "soapBg6", filePath: "image\\soapBg6.jpg" },
            { showName: "soapBg7", filePath: "image\\soapBg7.jpg" },
            { showName: "soapBg8", filePath: "image\\soapBg8.jpg" },
            { showName: "soapBg9", filePath: "image\\soapBg9.jpg" },
            { showName: "soapBg10", filePath: "image\\soapBg10.jpg" },
            { showName: "soapBg11", filePath: "image\\soapBg11.jpg" },
            { showName: "soapBg12", filePath: "image\\soapBg12.jpg" },
            { showName: "soapBg13", filePath: "image\\soapBg13.jpg" },
        ];
  $("#selImage").empty();
  $.each(imgList, function (key, obj) {
        var imgText = obj.showName + " [" + obj.filePath + "]";
        var $option = $('<option></option>')
                    .text(obj.filePath);
        $option.appendTo("#selImage");
    })
    $("#selImage").val(0);  //設定值為0的選項被選取
}
function selImageChange(s){
        var imgSrc = s[s.selectedIndex].value;
        // //指定來源圖片路徑
        $("#imgSelect").attr("src",imgSrc);
} 
function Button1_onclick(){
  imgChange();

}
function imgChange() {

    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    var imgSelect=document.getElementById("imgSelect");
    // 清除画布，准备绘制
    ctx.clearRect(0, 0, c.width, c.height);

    //add 問候語
    drawText();

   // debugger;
    //畫圖
    ctx.drawImage(imgSelect,0,0,c.width,c.height);
    //ctx.rect(0,0,c.width,c.height);
    //sleep(500);

    aDownload.href = myCanvas.toDataURL("image/png");

}
function drawText()
{

   //讀取 Form 表單欄位值
   var oform = document.forms['setForm'];
   var txtTitle = oform.elements.txtName.value;
   var txtBody0 = oform.elements.txtWeight.value;
   var txtBody="";
   var oilName="";
   var oilWeight="";
   var oilRate="";
    var table = document.getElementById("oilTable");
    var rowCount=document.getElementById("oilTable").rows.length;

   // 1. 找出 Canvas
   var c = document.getElementById("myCanvas");
   var ctx = c.getContext("2d");

   // 以下這段程式，若非不是一開始就畫出，就必須設定
   // globalCompositeOperation，否則，預設會蓋掉先前的內容
    ctx.globalCompositeOperation = "destination-over";
    ctx.font= "30px serif";
    ctx.textBaseline = "top";
    ctx.textAlign = "left"; // 置中對齊輸出文字

    // 刷上藍色漸層背景增添質感
    var grd = ctx.createLinearGradient(0, 0, 0, 50);
    grd.addColorStop(0, "white");
    grd.addColorStop(1, "#0000EE");
    ctx.strokeStyle = grd;
    var x=parseFloat(document.getElementById("txtX").value);
    var y=parseFloat(document.getElementById("txtY").value);
    //x += 20 ;
    y += 10;
    if(rowCount<=1){
        ctx.strokeText("72%馬賽皂", x, y ,300);
        ctx.font= "16px serif";
        ctx.textBaseline = "top";
    //   ctx.textAlign = "center"; // 置中對齊輸出文字
        ctx.textAlign = "left"; // 置中對齊輸出文字
        y += 20 ;

        // 刷上藍色漸層背景增添質感
        grd = ctx.createLinearGradient(0, 0, 0, 50);
        grd.addColorStop("0","magenta");
        grd.addColorStop("0.5","blue");
        grd.addColorStop("1.0","red");
        ctx.strokeStyle = grd;
       // x += 20 ;
        
        y += 30 ;
        ctx.strokeText(padRight("椰子油",10,".")+padLeft("200",4,"."), x, y ,200);
        y += 30 ;
        ctx.strokeText(padRight("棕梠油",10,".")+padLeft("200",4,"."), x, y ,200);
        y += 30 ;
        ctx.strokeText(padRight("橄欖油",10,".")+padLeft("525",4,"."), x, y ,200);
        y += 30 ;
        ctx.strokeText(padRight("乳油木果油",10,".")+padLeft("75",4,"."), x, y ,200);
        
    }
    else
    {
        ctx.strokeText(txtTitle, x, y ,200);
        ctx.font= "16px serif";
        ctx.textBaseline = "top";
        ctx.textAlign = "center"; // 置中對齊輸出文字
        y += 20 ;
      //  x += 20 ;
        
        for(i=1;i<=rowCount-1;i++)
        {
            oilRate=table.rows[i].cells[5].innerHTML;
            oilWeight=table.rows[i].cells[4].innerHTML;
            oilName=table.rows[i].cells[1].innerHTML;
           // txtBody = oilName+'   '+oilWeight+'\r\n';
            ctx.font= "16px serif";
            ctx.textBaseline = "top";
            ctx.textAlign = "left"; // 置中對齊輸出文字
    
            // 刷上藍色漸層背景增添質感
            grd = ctx.createLinearGradient(0, 0, 0, 50);
            grd.addColorStop("0","magenta");
            grd.addColorStop("0.5","blue");
            grd.addColorStop("1.0","red");
            ctx.strokeStyle = grd;
            y += 30 ;
            ctx.strokeText(padRight(oilName,10,".")+padLeft(oilWeight,4,"."), x, y ,200);
    
            //ctx.strokeText(txtBody, 10,10*(i+5) ,200);
    
        }
        
    }



}
/* 左邊補0 */
function padLeft(str, len ,flag) {
    str = '' + str;
    return str.length >= len ? str : new Array(len - str.length + 1).join(flag) + str;
}
 
/* 右邊補0 */
function padRight(str, len ,flag) {
    str = '' + str;
    return str.length >= len ? str : str + new Array(len - str.length + 1).join(flag);
}

</script>

</body>
</html>
